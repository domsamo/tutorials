{
  "name": "s-004-english-quiz",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -320,
        -220
      ],
      "id": "12a8579e-ce8c-4678-b938-3feac0643bbc",
      "name": "When clicking â€˜Test workflowâ€™"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ ì˜ì–´ íšŒí™” í•™ìŠµì„ ìœ„í•œ **ì¼ì¼ ì˜ì–´ í‘œí˜„ í€´ì¦ˆ ìƒì„± AI**ì…ë‹ˆë‹¤.\n\në‹¤ìŒ ì¡°ê±´ì— ë”°ë¼ í€´ì¦ˆë¥¼ ì˜ì–´ë¡œ ìƒì„±í•˜ì„¸ìš”:\n\n1. ì˜ì–´ íšŒí™”ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” í‘œí˜„(ìˆ™ì–´, ê´€ìš©êµ¬, êµ¬ë™ì‚¬ ë“±) ì¤‘ **í•˜ë‚˜**ë¥¼ ì„ íƒí•˜ì„¸ìš”.\n   - ì‹¤ì œ ì›ì–´ë¯¼ ëŒ€í™”ì—ì„œ ìì£¼ ë“±ì¥í•˜ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n   - ì§€ë‚˜ì¹˜ê²Œ ì–´ë µê±°ë‚˜ ë¹„ê²©ì‹ì ì¸ í‘œí˜„ì€ í”¼í•˜ì„¸ìš”.\n\n2. ì„ íƒí•œ í‘œí˜„ì˜ ì˜ë¯¸ë¥¼ explanation ì— **ê°„ë‹¨í•œ í•œê¸€ ë¬¸ì¥**ìœ¼ë¡œ ì„¤ëª…í•˜ì„¸ìš”. (1~2ë¬¸ì¥, í•œê¸€ë§Œ ì‚¬ìš©)\n\n3. ê·¸ í‘œí˜„ì´ ì“°ì¼ ìˆ˜ ìˆëŠ” **ì„œë¡œ ë‹¤ë¥¸ ìƒí™©ì˜ ì˜ˆë¬¸ 3ê°œë¥¼ ì˜ì–´ë¡œ ì‘ì„±í•˜ì„¸ìš”.**\n   - ê° ë¬¸ì¥ì€ ì‹¤ìƒí™œ ê¸°ë°˜ì˜ ì§§ê³  ëª…í™•í•œ íšŒí™”ì²´ ë¬¸ì¥ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n   - í•´ë‹¹ í‘œí˜„ì€ ë¬¸ì¥ ë‚´ì—ì„œ ë¹ˆì¹¸(_____)ìœ¼ë¡œ ëŒ€ì²´í•˜ì„¸ìš”.\n   - ì˜ˆë¬¸ì€ ë¬¸ë§¥ì„ í†µí•´ ì •ë‹µ ìœ ì¶”ê°€ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n4. ë§ˆì§€ë§‰ì— ì •ë‹µ(í‘œí˜„)ê³¼ ê° ë¬¸ì¥ì— ëŒ€í•œ ê°„ë‹¨í•œ ì˜ì–´ í•´ì„¤ì„ ë§ë¶™ì´ì„¸ìš”.\n\n5. explanationë¥¼ ì œì™¸í•œ ì „ì²´ ì¶œë ¥ì€ ì˜ì–´ë¡œ êµ¬ì„±í•˜ì„¸ìš”. (ë‹¨, í”„ë¡¬í”„íŠ¸ëŠ” í•œêµ­ì–´ë¡œ ì´í•´í•˜ê³  ì‘ì—…í•˜ì„¸ìš”.)\n\nì¶œë ¥ í˜•ì‹ ì˜ˆì‹œ:\n\n---\n{\n  \"example\": [\n    {\n      \"A\": \"I can't believe I lost my job.\",\n      \"B\": \"I know itâ€™s hard, but you need to _____ and move on.\",\n    },\n    {\n      \"A\": \"She started crying in the middle of the meeting.\",\n      \"B\": \"Yeah, I told her to take a break and _____\",\n    },\n    {\n      \"A\": \"I totally panicked during the test.\"\n      \"B\": \"You shouldâ€™ve taken a deep breath and tried to _____.\",\n    }\n  ],\n  \"answer\": \"pull yourself together\",\n  \"explanation\": \"ì´ ë¬¸êµ¬ëŠ” íŠ¹íˆ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë§ê±°ë‚˜ ê°ì •ì ì¸ ìƒí™©ì—ì„œ ì§„ì •í•˜ê³  í†µì œë ¥ì„ íšŒë³µí•˜ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.\"\n}\n\n\n\n---\n\nëª…ë ¹ì–´ë¥¼ ì´í•´í–ˆìœ¼ë©´ ìœ„ì˜ í˜•ì‹ì— ë”°ë¼ ì˜ì–´ í€´ì¦ˆë¥¼ ìƒì„±í•˜ì„¸ìš”.",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        -120,
        -100
      ],
      "id": "3dbb1cfb-b25e-4c0d-a115-92dec718b480",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"example\": [\n    {\n      \"A\": \"I can't believe I lost my job.\",\n      \"B\": \"I know itâ€™s hard, but you need to _____ and move on.\"\n    },\n    {\n      \"A\": \"She started crying in the middle of the meeting.\",\n      \"B\": \"Yeah, I told her to take a break and _____\"\n    },\n    {\n      \"A\": \"I totally panicked during the test.\",\n      \"B\": \"You shouldâ€™ve taken a deep breath and tried to _____.\"\n    }\n  ],\n  \"answer\": \"pull yourself together\",\n  \"explanation\": \"ì´ ë¬¸êµ¬ëŠ” íŠ¹íˆ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë§ê±°ë‚˜ ê°ì •ì ì¸ ìƒí™©ì—ì„œ ì§„ì •í•˜ê³  í†µì œë ¥ì„ íšŒë³µí•˜ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        60,
        100
      ],
      "id": "ef7c23c8-24c2-4201-83d1-4ef97204b1e6",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -120,
        100
      ],
      "id": "6adf1f7a-ece6-4bda-b394-a7a84f83666b",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "9FrkRfbtspOImIho",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "language": "python",
        "pythonCode": "data = items[0][\"json\"][\"output\"]\n\n# ì„¸ë¡œí˜• ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ì„¤ì • (9:16 ë¹„ìœ¨)\nviewport_width = 720\nviewport_height = 1280\n\n# HTML + CSS êµ¬ì„±\nhtml = f\"\"\"\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Daily English Quiz</title>\n  <style>\n    body {{\n      width: {viewport_width}px;\n      height: {viewport_height}px;\n      margin: 0;\n      padding: 40px;\n      box-sizing: border-box;\n      background: #fefefe;\n      font-family: 'Arial', sans-serif;\n\n      /* âœ… ìˆ˜í‰ ì •ë ¬ ì¶”ê°€ */\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-start;\n      align-items: center;\n    }}\n\n    .wrapper {{\n      width: 100%;\n      height: 100%;\n      padding: 40px;\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }}\n\n    h1 {{\n      font-size: 36px;\n      color: #2c3e50;\n      text-align: center;\n      margin-bottom: 30px;\n    }}\n\n    .quiz-block, .answer, .explanation {{\n      width: 100%; /* âœ… ë¸”ë¡ í­ ê³ ì • */\n      background: #ffffff;\n      padding: 20px;\n      margin-bottom: 20px;\n      border-radius: 12px;\n      border: 1px solid #ccc;\n      font-size: 24px;\n      line-height: 1.4;\n      box-sizing: border-box;\n    }}\n\n    .answer {{\n      background: #e9f7ef;\n      border-left: 6px solid #2ecc71;\n    }}\n\n    .explanation {{\n      background: #eaf2f8;\n      border-left: 6px solid #2980b9;\n    }}\n\n    .label {{\n      font-weight: bold;\n      margin-right: 5px;\n    }}\n\n    .highlight {{\n      color: #2980b9;\n      font-weight: bold;\n    }}\n  </style>\n</head>\n<body>\n  <div class=\"wrapper\"> <!-- âœ… ì—¬ê¸°ì„œ wrapper ì—´ê¸° -->\n    <h1>âœ¨ Daily English Quiz</h1>\n\"\"\"\n\n\n# ì˜ˆë¬¸ ë°˜ë³µ\nfor example in data[\"example\"]:\n    html += f\"\"\"\n    <div class=\"quiz-block\">\n      <p><span class=\"label\">A:</span> {example[\"A\"]}</p>\n      <p><span class=\"label\">B:</span> {example[\"B\"].replace(\"_____\", '<span class=\"highlight\">_____</span>')}</p>\n    </div>\n    \"\"\"\n\n# ì •ë‹µê³¼ í•´ì„¤ ì¶”ê°€\nhtml += f\"\"\"\n  <div class=\"answer\">\n    âœ… <strong>Answer:</strong> {data[\"answer\"]}\n  </div>\n\n  <div class=\"explanation\">\n    ğŸ’¬ <strong>Explanation:</strong> {data[\"explanation\"]}\n  </div>\n</div> <!-- âœ… ì—¬ê¸°ì„œ wrapper ë‹«ê¸° -->\n</body>\n</html>\n\"\"\"\n\n# n8nì—ì„œ htmlcsstoimage APIë¡œ ë„˜ê¸¸ ê°’ ë°˜í™˜\nreturn [{\n  \"json\": {\n    \"html\": html,\n    \"viewport_width\": viewport_width,\n    \"viewport_height\": viewport_height\n  }\n}]"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        200,
        -100
      ],
      "id": "02b71ec7-8703-4efd-8fca-6e8c6106bbfc",
      "name": "Code"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloudinary.com/v1_1/dfi7j4svz/image/upload",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "upload_preset",
              "value": "ml_default"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        520,
        -100
      ],
      "id": "a4f8057e-2c6e-4fb4-afbd-d1e3f3079ef9",
      "name": "ImageUpload"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:8131/render",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/x-www-form-urlencoded"
            }
          ]
        },
        "sendBody": true,
        "contentType": "form-urlencoded",
        "bodyParameters": {
          "parameters": [
            {
              "name": "html",
              "value": "={{ $json.html }}"
            },
            {
              "name": "viewport_width",
              "value": "={{ $json.viewport_width }}"
            },
            {
              "name": "viewport_height",
              "value": "={{ $json.viewport_height }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        360,
        -100
      ],
      "id": "12261210-5d7e-44b8-849f-269e76506980",
      "name": "HTML2Image"
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "17841474456901877",
        "edge": "media",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "image_url",
                "value": "={{ $json.url }}"
              },
              {
                "name": "caption",
                "value": "={{ $('AI Agent').item.json.output.explanation }}"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        680,
        -100
      ],
      "id": "60d8be93-57ed-440c-9b40-3ed817074069",
      "name": "Facebook Graph API",
      "credentials": {
        "facebookGraphApi": {
          "id": "1OunhV0Z7OmR4Td0",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "17841474456901877",
        "edge": "media_publish",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "creation_id",
                "value": "={{ $json.id }}"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        840,
        -100
      ],
      "id": "4941f1ae-7bbf-4695-9d4c-1911bf30a4c8",
      "name": "Facebook Graph API1",
      "credentials": {
        "facebookGraphApi": {
          "id": "1OunhV0Z7OmR4Td0",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -320,
        -20
      ],
      "id": "2da5d9d0-2bcf-44e0-ab80-0275f41f2472",
      "name": "Schedule Trigger"
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking â€˜Test workflowâ€™": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "HTML2Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML2Image": {
      "main": [
        [
          {
            "node": "ImageUpload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ImageUpload": {
      "main": [
        [
          {
            "node": "Facebook Graph API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Facebook Graph API": {
      "main": [
        [
          {
            "node": "Facebook Graph API1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "7bda83a9-7cbf-4c89-a4bd-86cc72a03b63",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a"
  },
  "id": "lexeeG6EFnreI8PF",
  "tags": []
}